@inherits ModalDialogFormBase<SpatialReferenceModel>
@inject IApplicationScope AppScope

<ModalDialogFormBase T="SpatialReferenceModel"
                     OnDialogClose="base.OnDialogClose"
                     Model="base.Model">
    <FormContent>
        <SpatialReferenceControl OnSelectProjection="OnProjectionSelector" @ref="control"/>
    </FormContent>

</ModalDialogFormBase>

@code {
    private SpatialReferenceControl? control;

    private Task OnProjectionSelector()
            => HandleAsync(async () => {
                await AppScope.ShowModalDialog(typeof(SpatialReferenceSelectorDialog),
                                               "Select Project",
                                               Model);

                control!.SpatialReference = Model.SpatialReference;
            });
}